language: go

go:
- 1.7

env:
  global:
  - GO15VENDOREXPERIMENT=1
  - GOOS=linux

install:
- CGO_ENABLED=0 go build -a --installsuffix cgo --ldflags="-s" -o gh-latest

script:
  - md5sum gh-latest > md5.txt
  - sha256sum gh-latest > sha256.txt
  - sha512sum gh-latest > sha512.txt

deploy:
  - provider: releases
    skip_cleanup: true
    api_key:
      secure: key_needed
    file:
      - gh-latest
      - md5.txt
      - sha256.txt
      - sha512.txt
    on:
      tags: true
